# Тесты для CollegeServer

## Описание

Этот проект содержит unit тесты для `UsersController` в приложении CollegeServer.

## Установленные пакеты

- **xUnit** - фреймворк для unit тестирования
- **Moq** - библиотека для создания моков
- **Microsoft.EntityFrameworkCore.InMemory** - для тестирования с in-memory базой данных

## Запуск тестов

### Из Visual Studio

1. Откройте решение `CollegeServer.sln` в Visual Studio
2. В **Test Explorer** (Тест → Test Explorer) вы увидите все доступные тесты
3. Нажмите **Run All** (Запустить все) или выберите конкретные тесты для запуска
4. Результаты тестов отобразятся в Test Explorer

### Из командной строки

```bash
# Запуск всех тестов
dotnet test

# Запуск тестов с подробным выводом
dotnet test --verbosity normal

# Запуск конкретного теста
dotnet test --filter "GetUsers_ReturnsAllUsers"
```

## Доступные тесты

### 1. GetUsers_ReturnsAllUsers
- **Описание**: Проверяет, что метод `GetUsers` возвращает всех пользователей
- **Ожидаемый результат**: Возвращает список всех пользователей в формате `UserResponseDto`

### 2. GetUser_WithValidId_ReturnsUser
- **Описание**: Проверяет получение пользователя по валидному ID
- **Ожидаемый результат**: Возвращает данные пользователя

### 3. GetUser_WithInvalidId_ReturnsNotFound
- **Описание**: Проверяет обработку несуществующего ID
- **Ожидаемый результат**: Возвращает `NotFoundResult`

### 4. Login_WithValidCredentials_ReturnsUser
- **Описание**: Проверяет успешную авторизацию с правильными данными
- **Ожидаемый результат**: Возвращает данные пользователя

### 5. Login_WithInvalidCredentials_ReturnsUnauthorized
- **Описание**: Проверяет обработку неверных данных для входа
- **Ожидаемый результат**: Возвращает `UnauthorizedObjectResult`

### 6. DeleteUser_WithValidId_ReturnsNoContent
- **Описание**: Проверяет успешное удаление пользователя
- **Ожидаемый результат**: Возвращает `NoContentResult` и удаляет пользователя из БД

### 7. DeleteUser_WithNonExistentId_ReturnsNotFound
- **Описание**: Проверяет обработку попытки удаления несуществующего пользователя
- **Ожидаемый результат**: Возвращает `NotFoundResult`

## Структура тестов

Каждый тест следует паттерну **Arrange-Act-Assert**:

1. **Arrange** - настройка тестовых данных
2. **Act** - выполнение тестируемого действия
3. **Assert** - проверка результата

## Используемые технологии

- **In-Memory Database** - для изоляции тестов от реальной БД
- **Moq** - для создания моков зависимостей
- **xUnit** - для написания и запуска тестов
- **Entity Framework Core** - для работы с данными в тестах

## Примечания

- Каждый тест использует уникальную in-memory базу данных
- Тесты автоматически очищают ресурсы после выполнения
- Все тесты независимы друг от друга
